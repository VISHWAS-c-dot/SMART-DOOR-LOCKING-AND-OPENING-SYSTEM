ORG 0000H
JNB P0.2,DOWN1
REP:MOV R7,#FFH
JNB PO.1,DOWN1
SETB C
JC DOWN1
UP1:MOV TMOD,#01H
MOV THO,#FFH
MOV TLO,#FFH
DJNZ R7, UP1
DOWN1:JNC CHECK
SETB P1.0
MOV TCON,#10H
CLR TRO
CLR TFO
INC A
CJNZ A,R7,UP1
CLR A
DOWN2:SJMP REP 

CHECK:JNB P0.2,DOWN1
UP2:SETB P1.O
JB UP2
END
